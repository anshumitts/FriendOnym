<!DOCTYPE html>
<html>
<head>
	<title>Xml Generator for Friendonym</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
	<script src="http://maxcdn.(bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script>
		function create()
		{

			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
			    if (xhttp.readyState == 4 && xhttp.status == 200) {
			        return myFunction(xhttp);
			    }
			};
			xhttp.open("GET", "books.xml", true);
			xhttp.send();
			function myFunction(xml) 
			{
			    var xmlDoc 	= xml.responseXML;
		    	Doc  		= xmlDoc.getElementsByTagName("friendonym")[0];
			    Trow 		= document.getElementsByTagName("tr");
			    for (var i 	= Trow.length-2; i >= 1; i--)
			    {
			    	inputs 	= Trow[i].getElementsByTagName("input");
			    	Name 	= inputs[0].value;
			    	Nick 	= inputs[1].value;
				    newData 	= xmlDoc.createElement("person");
				    // newData.setAttribute("category","Facebook");
				    // newData.setAttribute("Link",link);
				    // newData.setAttribute("UserID","164476168413");
				    newData.setAttribute("Rname",Name);
				    newData.setAttribute("Pname",Nick);
			    	Doc.appendChild(newData);
			    }
		    	var xmlText = new XMLSerializer().serializeToString(Doc);
		    	$('#programatically').attr("href","data:text/plain;charset=UTF-8," + encodeURIComponent(xmlText));
		    	$('#programatically').text("click here to download");
		    	console.log(xmlText);
		    	// $("#programatically").attr("href",);â€‹
				return Doc;
			}
		}
		function Remove(e)
		{
			e.closest('tr').remove();
		}
		function add() 
		{

			var node 	= document.createElement("tr");                 // Create a <li> node
			var td 		= document.createElement("td");
			var input 	= document.createElement("input");
			input.setAttribute("type","Text");
			input.setAttribute("class","col-sm-12");
			input.setAttribute("placeholder","Real Name"); 
			td.appendChild(input);
			node.appendChild(td);
			var td 		= document.createElement("td");
			var input 	= document.createElement("input");
			input.setAttribute("type","Text");
			input.setAttribute("class","col-sm-12");
			input.setAttribute("placeholder","Nick Name"); 
			td.appendChild(input);
			node.appendChild(td);
			var td 		= document.createElement("td");
			var button 	= document.createElement("button");
			button.setAttribute("class","col-sm-6");
			button.setAttribute("onclick","Remove(this);");
			button.innerHTML="Remove";
			td.appendChild(button);
			node.appendChild(td);
			document.getElementById("Data").appendChild(node);
		}

	</script>
</head>
<body>
<div class="container">
	<h2>Create your friend list</h2>
	<table class="table">
		<thead>
		  <tr>
			<th>Real Name</th>
			<th>Nick Name</th>
			<th></th>
		  </tr>
		</thead>
		<tbody id="Data">
		  <tr>
			<td><input type="Text" class="col-sm-12" placeholder="Real Name"></td>
			<td><input type="Text" class="col-sm-12" placeholder="Nick Name"></td>
			<td><button class="col-sm-6" onclick="Remove(this);">Remove</button></td>
		  </tr>
		</tbody>
		<tbody>
			<td><button class="col-sm-4" onclick="add();"> Add</button></td>
			<td><button class="col-sm-4" onclick="create();" download="file.xml"> Create</button></td>
		</tbody>
	</table>
	<a id="programatically" href="#" download="books.xml"></a>
</div>
<div id="demo"></div>
</body>
</html>